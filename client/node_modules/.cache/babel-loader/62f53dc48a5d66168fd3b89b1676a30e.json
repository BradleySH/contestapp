{"ast":null,"code":"var _jsxFileName = \"/Users/markgw/Desktop/dev/contestapp/client/pinion-games/src/pages/Team.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect, useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { useLocation } from \"react-router\";\nimport { UserContext } from \"../context/UserProvider\";\nimport axios from \"axios\";\nimport Header from \"../components/Header\";\nimport SubHeader from \"../components/SubHeader\";\nimport MemberTag from \"../components/MemberTag\";\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport EditIcon from '@material-ui/icons/Edit';\nimport FooterNavbar from \"../components/FooterNavbar\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst userAxios = axios.create();\nuserAxios.interceptors.request.use(config => {\n  const token = localStorage.getItem(\"token\");\n  config.headers.Authorization = `Bearer ${token}`;\n  return config;\n});\n\nconst Team = () => {\n  _s();\n\n  const location = useLocation();\n  const {\n    team,\n    client\n  } = location.state;\n  const {\n    user: {\n      role\n    }\n  } = useContext(UserContext);\n  const [members, setMembers] = useState([]);\n  const [coach, setCoach] = useState({}); // The states below are for the Action Tool(Add Member, Edit, Delete)\n\n  const [users, setUsers] = useState([]);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [actionToggle, setActionToggle] = useState(false);\n  const [addToggle, setAddToggle] = useState(false);\n  const [editToggle, setEditToggle] = useState(false);\n  const initEditInputs = {\n    name: '',\n    avatar: ''\n  };\n  const [editInputs, setEditInputs] = useState(initEditInputs);\n  const [deleteToggle, setDeleteToggle] = useState(false);\n  const initDeleteInput = {\n    name: ''\n  };\n  const [deleteInput, setDeleteInput] = useState(initDeleteInput); // Only allows action tool to User with role = admin or commissioner\n\n  function hasPermission() {\n    if (role === 'admin') {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: !actionToggle ? /*#__PURE__*/_jsxDEV(MoreHorizIcon, {\n          fontSize: 'large',\n          onClick: handleActionToggle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 34\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"action-tool\",\n          style: {\n            border: '2px solid black'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"close\",\n            onClick: handleActionToggle,\n            children: /*#__PURE__*/_jsxDEV(CancelIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"delete\",\n            onClick: () => handleDeleteToggle(),\n            children: [/*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 61,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Delete Team\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"edit\",\n            onClick: () => handleEditToggle(),\n            children: [/*#__PURE__*/_jsxDEV(EditIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Edit Team\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 17\n        }, this)\n      }, void 0, false);\n    } else if (role === 'commissioner') {\n      return /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: !actionToggle ? /*#__PURE__*/_jsxDEV(MoreHorizIcon, {\n          fontSize: 'large',\n          onClick: handleActionToggle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 34\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"action-tool\",\n          style: {\n            border: '2px solid black'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"close\",\n            onClick: handleActionToggle,\n            children: /*#__PURE__*/_jsxDEV(CancelIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 25\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"delete\",\n            onClick: () => handleDeleteToggle(),\n            children: [/*#__PURE__*/_jsxDEV(DeleteIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Delete Team\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 81,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"edit\",\n            onClick: () => handleEditToggle(),\n            children: [/*#__PURE__*/_jsxDEV(EditIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Edit Team\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 17\n        }, this)\n      }, void 0, false);\n    } else {\n      return null;\n    }\n  }\n\n  function handleDeleteToggle() {\n    setDeleteToggle(!deleteToggle);\n  }\n\n  function handleChangeDelete(e) {\n    const {\n      name,\n      value\n    } = e.target;\n    setDeleteInput(prevDeleteInputs => ({ ...prevDeleteInputs,\n      [name]: value\n    }));\n  }\n\n  function handleDelete() {\n    editToggle ? setEditToggle(prevEditToggle => !prevEditToggle) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"To Confirm, Please Enter Team's Name: \", `${team.name} = `]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"name\",\n        value: deleteInput.name,\n        placeholder: team.name,\n        onChange: handleChangeDelete\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          deleteInput.name === team.name ? deleteTeam() : window.alert(\"Entry is wrong\");\n        },\n        children: \"Confirm Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }, this);\n  }\n\n  function deleteTeam() {\n    userAxios.delete(`/api/team/${team._id}`).then(res => console.log(res)).catch(err => console.log(err));\n  }\n\n  function handleEditToggle() {\n    setEditToggle(!editToggle);\n  }\n\n  function handleChangeEdit(e) {\n    const {\n      name,\n      value\n    } = e.target;\n    setEditInputs(prevEditInputs => ({ ...prevEditInputs,\n      [name]: value\n    }));\n  }\n\n  function handleEdit() {\n    if (deleteToggle) {\n      setDeleteToggle(prevDeleteToggle => !prevDeleteToggle);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Edit Team\", /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"name\",\n        value: editInputs.name,\n        placeholder: team.name,\n        onChange: handleChangeEdit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        name: \"avatar\",\n        value: editInputs.avatar,\n        placeholder: team.avatar,\n        onChange: handleChangeEdit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => editTeam(),\n        children: \"Confirm Edit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }, this);\n  }\n\n  function editTeam() {\n    userAxios.put(`/api/team/${team._id}`, editInputs).then(res => console.log(res)).catch(err => console.log(err));\n  }\n\n  function getTeamMembers() {\n    userAxios.get(`/api/user/team/${team._id}`).then(res => setMembers(res.data)).catch(err => console.log(err));\n  }\n\n  function handleActionToggle() {\n    setActionToggle(prevActionToggle => !prevActionToggle);\n  }\n\n  function getCoach() {\n    userAxios.get(`/api/user/${team.coach}`).then(res => console.log(res)).catch(err => console.log(err));\n  }\n\n  useEffect(() => {\n    getTeamMembers();\n  }, []);\n  console.log(client);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(SubHeader, {\n      header1: client.name,\n      header2: team.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 13\n    }, this), hasPermission(), editToggle ? handleEdit() : null, deleteToggle ? handleDelete() : null, /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [\"Coach: \", team.coach === null ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Not Assigned\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 47\n      }, this) : getCoach()]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n      children: \"Team Members:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 13\n    }, this), members.length > 0 ? members.map(member => /*#__PURE__*/_jsxDEV(MemberTag, {\n      member: member,\n      name: member.name,\n      avatar: member.avatar,\n      set: () => console.log(\"set\")\n    }, member._id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 39\n    }, this)) : null, role === 'admin' ? /*#__PURE__*/_jsxDEV(Link, {\n      to: {\n        pathname: '/addteammember',\n        state: {\n          team,\n          client\n        }\n      },\n      style: {\n        borderRadius: '50%',\n        boxShadow: '0 0 10px blue',\n        backgroundColor: 'grey',\n        color: 'white',\n        display: 'grid',\n        fontSize: '24px',\n        height: '145px',\n        margin: '16px',\n        placeItems: 'center',\n        textAlign: 'center',\n        textDecoration: 'none',\n        width: '145px'\n      },\n      children: /*#__PURE__*/_jsxDEV(PersonAddIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 17\n    }, this) : role === 'commissioner' ? /*#__PURE__*/_jsxDEV(Link, {\n      to: {\n        pathname: '/addteammember',\n        state: {\n          team,\n          client\n        }\n      },\n      style: {\n        borderRadius: '50%',\n        boxShadow: '0 0 10px blue',\n        backgroundColor: 'grey',\n        color: 'white',\n        display: 'grid',\n        fontSize: '24px',\n        height: '145px',\n        margin: '16px',\n        placeItems: 'center',\n        textAlign: 'center',\n        textDecoration: 'none',\n        width: '145px'\n      },\n      children: /*#__PURE__*/_jsxDEV(PersonAddIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 17\n    }, this) : null, /*#__PURE__*/_jsxDEV(FooterNavbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Team, \"TDVL5gxXI1VrAv7lDohhh4C0IMU=\", false, function () {\n  return [useLocation];\n});\n\n_c = Team;\nexport default Team;\n\nvar _c;\n\n$RefreshReg$(_c, \"Team\");","map":{"version":3,"sources":["/Users/markgw/Desktop/dev/contestapp/client/pinion-games/src/pages/Team.js"],"names":["useState","useEffect","useContext","Link","useLocation","UserContext","axios","Header","SubHeader","MemberTag","MoreHorizIcon","PersonAddIcon","CancelIcon","DeleteIcon","EditIcon","FooterNavbar","userAxios","create","interceptors","request","use","config","token","localStorage","getItem","headers","Authorization","Team","location","team","client","state","user","role","members","setMembers","coach","setCoach","users","setUsers","searchQuery","setSearchQuery","actionToggle","setActionToggle","addToggle","setAddToggle","editToggle","setEditToggle","initEditInputs","name","avatar","editInputs","setEditInputs","deleteToggle","setDeleteToggle","initDeleteInput","deleteInput","setDeleteInput","hasPermission","handleActionToggle","border","handleDeleteToggle","handleEditToggle","handleChangeDelete","e","value","target","prevDeleteInputs","handleDelete","prevEditToggle","deleteTeam","window","alert","delete","_id","then","res","console","log","catch","err","handleChangeEdit","prevEditInputs","handleEdit","prevDeleteToggle","editTeam","put","getTeamMembers","get","data","prevActionToggle","getCoach","length","map","member","pathname","borderRadius","boxShadow","backgroundColor","color","display","fontSize","height","margin","placeItems","textAlign","textDecoration","width"],"mappings":"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","sourcesContent":["import { useState, useEffect, useContext } from \"react\"\nimport { Link } from \"react-router-dom\";\nimport { useLocation } from \"react-router\"\nimport { UserContext } from \"../context/UserProvider\";\nimport axios from \"axios\"\n\nimport Header from \"../components/Header\";\nimport SubHeader from \"../components/SubHeader\";\nimport MemberTag from \"../components/MemberTag\"\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\nimport PersonAddIcon from '@material-ui/icons/PersonAdd';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport EditIcon from '@material-ui/icons/Edit';\nimport FooterNavbar from \"../components/FooterNavbar\";\n\nconst userAxios = axios.create()\nuserAxios.interceptors.request.use(config => {\n    const token = localStorage.getItem(\"token\")\n    config.headers.Authorization = `Bearer ${token}`\n    return config\n})\n\nconst Team = () => {\n\n    const location = useLocation()\n    const { team, client } = location.state\n\n    const {user: {role}} = useContext(UserContext)\n\n    const [members, setMembers] = useState([])\n    const [coach, setCoach] = useState({})\n    \n    // The states below are for the Action Tool(Add Member, Edit, Delete)\n    const [users, setUsers] = useState([])\n    const [searchQuery, setSearchQuery] = useState('')\n\n    const [actionToggle, setActionToggle] = useState(false)\n\n    const [addToggle, setAddToggle] = useState(false)\n\n    const [editToggle, setEditToggle] = useState(false)\n    const initEditInputs = {name: '', avatar: ''}\n    const [editInputs, setEditInputs] = useState(initEditInputs)\n    \n    const [deleteToggle, setDeleteToggle] = useState(false)\n    const initDeleteInput = {name: ''}\n    const [deleteInput, setDeleteInput] = useState(initDeleteInput)\n\n    // Only allows action tool to User with role = admin or commissioner\n    function hasPermission(){\n        if(role === 'admin'){\n            return (\n                <>\n                {!actionToggle ? <MoreHorizIcon fontSize={'large'} onClick={handleActionToggle} /> :\n                <div className=\"action-tool\" style={{border: '2px solid black'}}>\n                    <div className=\"close\" onClick={handleActionToggle} >\n                        <CancelIcon />\n                    </div>\n                    <div className=\"delete\"onClick={() => handleDeleteToggle()} >\n                        <DeleteIcon />\n                        <p>Delete Team</p>\n                    </div>\n                    <div className=\"edit\"onClick={() => handleEditToggle()} >\n                        <EditIcon />\n                        <p>Edit Team</p>\n                    </div>\n                </div>}\n            </>\n            )\n        } else if(role === 'commissioner'){\n            return (\n            <>\n                {!actionToggle ? <MoreHorizIcon fontSize={'large'} onClick={handleActionToggle} /> :\n                <div className=\"action-tool\" style={{border: '2px solid black'}}>\n                    <div className=\"close\" onClick={handleActionToggle} >\n                        <CancelIcon />\n                    </div>\n                    <div className=\"delete\"onClick={() => handleDeleteToggle()} >\n                        <DeleteIcon />\n                        <p>Delete Team</p>\n                    </div>\n                    <div className=\"edit\"onClick={() => handleEditToggle()} >\n                        <EditIcon />\n                        <p>Edit Team</p>\n                    </div>\n                </div>}\n            </>\n            )\n        } else {\n            return null\n        }\n    }\n\n    function handleDeleteToggle(){\n        setDeleteToggle(!deleteToggle)\n    }\n\n    function handleChangeDelete(e){\n        const {name, value} = e.target\n\n        setDeleteInput(prevDeleteInputs => ({...prevDeleteInputs, [name]: value}))\n    }\n\n    function handleDelete(){\n        editToggle ? \n        setEditToggle(prevEditToggle => !prevEditToggle) \n        : \n        (\n        <div>\n            <label>To Confirm, Please Enter Team's Name: {`${team.name} = `}</label>\n            <input type='text' name='name' value={deleteInput.name} placeholder={team.name} onChange={handleChangeDelete}/>\n            <button onClick={() => {deleteInput.name === team.name ? deleteTeam() : window.alert(\"Entry is wrong\")}}>Confirm Delete</button>\n        </div>\n        )\n    }\n\n    function deleteTeam(){\n        userAxios.delete(`/api/team/${team._id}`)\n          .then(res => console.log(res))\n          .catch(err => console.log(err))\n    }\n\n\n    function handleEditToggle(){\n        setEditToggle(!editToggle)\n    }\n\n    function handleChangeEdit(e){\n        const {name, value} = e.target\n\n        setEditInputs(prevEditInputs => ({...prevEditInputs, [name]: value}))\n    }\n\n    function handleEdit(){\n        if(deleteToggle){\n            setDeleteToggle(prevDeleteToggle => !prevDeleteToggle)\n        }\n        return (\n            <div>\n                Edit Team\n                <input type=\"text\" name=\"name\" value={editInputs.name} placeholder={team.name} onChange={handleChangeEdit}/>\n                <input type=\"text\" name=\"avatar\" value={editInputs.avatar} placeholder={team.avatar} onChange={handleChangeEdit}/>\n                <button onClick={() => editTeam()}>Confirm Edit</button>\n            </div>\n        )\n    }\n\n    function editTeam(){\n        userAxios.put(`/api/team/${team._id}`, editInputs)\n            .then(res => console.log(res))\n            .catch(err => console.log(err))\n    }\n\n\n    function getTeamMembers(){\n        userAxios.get(`/api/user/team/${team._id}`)\n            .then(res => setMembers(res.data))\n            .catch(err => console.log(err))\n    }\n\n    function handleActionToggle(){\n        setActionToggle(prevActionToggle => !prevActionToggle)\n    }\n\n\n    function getCoach(){\n        userAxios.get(`/api/user/${team.coach}`)\n            .then(res => console.log(res))\n            .catch(err => console.log(err))\n    }\n\n    useEffect(() => {\n        getTeamMembers()\n    }, [])\n\n    console.log(client)\n\n    return (\n        <>\n            <Header />\n            <SubHeader header1={client.name} header2={team.name}/>\n            {hasPermission()}\n            {editToggle ? handleEdit() : null}\n            {deleteToggle ? handleDelete() : null}\n            <div>\n                Coach: {team.coach === null ? <p>Not Assigned</p> : getCoach()}\n            </div>\n            <label>Team Members:</label>\n            { members.length > 0 ?\n                members.map(member => <MemberTag key={member._id} member={member} name={member.name} avatar={member.avatar} set={() => console.log(\"set\")}/>) \n            : \n                null\n            }\n            {role === 'admin' ? \n                \n                <Link to={{pathname: '/addteammember', state: {team, client}}}\n                    style={{\n                        borderRadius: '50%', \n                        boxShadow: '0 0 10px blue', \n                        backgroundColor: 'grey',\n                        color: 'white', \n                        display: 'grid', \n                        fontSize: '24px', \n                        height: '145px',\n                        margin: '16px', \n                        placeItems: 'center', \n                        textAlign: 'center', \n                        textDecoration: 'none',\n                        width: '145px',\n                    }}>\n                <PersonAddIcon />\n                </Link>\n                :\n                role === 'commissioner' ? \n                    \n                <Link to={{pathname: '/addteammember', state: {team, client}}}\n                    style={{\n                        borderRadius: '50%', \n                        boxShadow: '0 0 10px blue', \n                        backgroundColor: 'grey',\n                        color: 'white', \n                        display: 'grid', \n                        fontSize: '24px', \n                        height: '145px',\n                        margin: '16px', \n                        placeItems: 'center', \n                        textAlign: 'center', \n                        textDecoration: 'none',\n                        width: '145px',\n                    }}>\n                <PersonAddIcon />\n                </Link>\n                :\n                null\n            }\n            <FooterNavbar />\n        </>\n    )\n}\n\nexport default Team"]},"metadata":{},"sourceType":"module"}